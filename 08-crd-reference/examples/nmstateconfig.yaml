# NMStateConfig example
# Defines static network configuration for a host
apiVersion: agent-install.openshift.io/v1beta1
kind: NMStateConfig
metadata:
  name: master-0-network
  namespace: my-cluster
  labels:
    # Must match InfraEnv's nmStateConfigLabelSelector
    cluster-name: my-cluster
spec:
  # Network configuration using NMState format
  config:
    interfaces:
      # Primary interface with static IP
      - name: eno1
        type: ethernet
        state: up
        ipv4:
          address:
            - ip: 192.168.1.10
              prefix-length: 24
          enabled: true
          dhcp: false
        ipv6:
          enabled: false
      
      # Example: Bond configuration
      # - name: bond0
      #   type: bond
      #   state: up
      #   link-aggregation:
      #     mode: 802.3ad
      #     options:
      #       miimon: "100"
      #     port:
      #       - eno2
      #       - eno3
      #   ipv4:
      #     address:
      #       - ip: 192.168.2.10
      #         prefix-length: 24
      #     enabled: true
    
    # Default gateway
    routes:
      config:
        - destination: 0.0.0.0/0
          next-hop-address: 192.168.1.1
          next-hop-interface: eno1
    
    # DNS configuration
    dns-resolver:
      config:
        server:
          - 192.168.1.1
          - 8.8.8.8
  
  # MAC address mapping (required for matching hosts)
  interfaces:
    - name: eno1
      macAddress: "00:11:22:33:44:55"

